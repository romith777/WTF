<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Login-WTP</title>
  <link rel="stylesheet" href="login.css">
  <link rel="stylesheet" href="index.css">
  <!-- fonts... -->
</head>
<body>
  <div class="loader-wrapper">
    <div class="loader">
      <span class="loader-inner"><span>WTPRINTS<div class="loader-in-line"></div></span></span>
    </div>
  </div>

  <div class="new-body filter-blur">
    <header class="navtotal" style="height: 70px;position: relative;">
      <div class="navbar">
        <a href="index.html">
          <div class="nav-logo"><h1 class="nav-txt">WTPRINTS</h1></div>
        </a>
        <div class="nav-components">
          <div><p style="cursor: pointer;">MEN</p></div>
          <div><p style="cursor: pointer;">WOMEN</p></div>
          <div><p style="cursor: pointer;">OTHER</p></div>
        </div>
      </div>
    </header>

    <div class="new-body-information">
      <div class="collab-image-box">
        <img class="collab-image" src="assets/onepiece-collab.jpg" alt="collab">
      </div>

      <div class="information">
        <div class="login-signup-change">
          <div class="login-signup-content">
            <div class="slider-change"></div>

            <!-- LOGIN BOX -->
            <div class="login-box" style="display: block;">
              <div style="display:flex;flex-direction:column;gap:20px;">
                <div style="display:flex;flex-direction:column;gap:10px;">
                  <div><p style="font-size:25px;">Login</p></div>
                  <div><p style="color:grey;font-size:20px;">Login to resume your journey.</p></div>
                </div>

                <!-- LOGIN FORM: action -> /login, method -> POST, names added -->
                <div id="login-message" class="signup-message" style="display:none;">
                    Signup successful! Please login.
                </div>

                <form id="loginForm" action="/login" method="POST" class="input-holder" style="gap:20px;">
                  <input name="username" type="text" placeholder="UserName" required>
                  <input name="password" type="password" placeholder="Password" required>
                  <button class="login-button" type="submit">Login</button>
                </form>
              </div>

              <div style="display:flex;justify-content:flex-start;gap:10px;margin-top:50px;">
                <hr style="height:0.5px;width:14.3vw;border-style:solid;margin-top:4px;background-color:black;">
                <p>OR</p>
                <hr style="height:0.5px;width:14.3vw;border-style:solid;margin-top:4px;background-color:black;">
              </div>
              <div style="margin-top:40px;">
                <button class="login-button in-login-signup-button">Signup</button>
              </div>
            </div>

            <!-- SIGNUP BOX -->
            <div class="signup-box" style="display: none;">
              <div style="display:flex;flex-direction:column;gap:20px;">
                <div style="display:flex;flex-direction:column;gap:10px;">
                  <div><p style="font-size:25px;">Signup</p></div>
                  <div><p style="color:grey;font-size:20px;">Join us to be a part of our family.</p></div>
                </div>

                <!-- SIGNUP FORM: action -> /signup, method -> POST, names added -->
                <div id="signup-message" class="signup-message" style="display:none;">
                    Signup successful! Please login.
                </div>
                <form id="signupForm" action="/signup" method="POST" class="input-holder" style="gap:20px;">
                  <input name="username" type="text" placeholder="Name" required>
                  <input name="email" type="email" placeholder="Email" required>
                  <input name="password" type="password" placeholder="Password" required>
                  <button class="login-button" type="submit">Signup</button>
                </form>
              </div>

              <div style="display:flex;justify-content:flex-start;gap:10px;margin-top:50px;">
                <hr style="height:0.5px;width:14.3vw;border-style:solid;margin-top:4px;background-color:black;">
                <p>OR</p>
                <hr style="height:0.5px;width:14.3vw;border-style:solid;margin-top:4px;background-color:black;">
              </div>
              <div style="margin-top:40px;">
                <button class="login-button in-signup-login-button">Login</button>
              </div>
            </div>

          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    // loader
    window.addEventListener("load", function() {
      document.querySelector(".loader-wrapper").style.display = "none";
      document.querySelector(".new-body").classList.remove("filter-blur");
    });

    // slider animation & toggles (kept from your original)
    function sliderChangerAni(){ document.querySelector(".slider-change").style.animationName = 'none'; }
    function slideChanger(){
      document.querySelector(".login-box").style.display = 'none';
      document.querySelector(".signup-box").style.display = 'block';
      setTimeout(sliderChangerAni,500);
    }
    document.querySelector(".in-login-signup-button").addEventListener('click', ()=>{
      document.querySelector(".slider-change").style.animationName = 'slideChange';
      setTimeout(slideChanger, 500);
    });

    function slideChanger2(){
      document.querySelector(".login-box").style.display = 'block';
      document.querySelector(".signup-box").style.display = 'none';
      setTimeout(sliderChangerAni, 500);
    }
    document.querySelector(".in-signup-login-button").addEventListener('click', ()=>{
      document.querySelector(".slider-change").style.animationName = 'slideChange';
      setTimeout(slideChanger2, 500);
    });

    const urlParams = new URLSearchParams(window.location.search);

    // common css
    if(urlParams.get('signup') === 'exists' || urlParams.get('login') === 'nouser'){
        let css = '';
        if(urlParams.get('signup') === 'exists')    css = "signup-message";
        else if(urlParams.get('login') === 'nouser') css = "login-message";
        
        document.getElementById(css).style.display = 'block';
        document.getElementById(css).style.backgroundColor = 'red';
        document.getElementById(css).style.color = 'black';
        
        setTimeout(() => {
            document.getElementById(css).style.display = 'none';
        }, 2500);
    }
    
    // for login
    if(urlParams.get('login') === 'nouser'){
        document.getElementById('login-message').innerHTML = 'User not found. Password or Username maybe incorrect.';
    }

    // for signup
    if(urlParams.get('signup') === 'success'){
        document.getElementById('login-message').style.display = 'block';
        setTimeout(() => {
            document.getElementById('login-message').style.display = 'none';
        }, 2500);
    }
    else if(urlParams.get('signup') === 'exists'){
        document.querySelector(".login-box").style.display = 'none';
        document.querySelector(".signup-box").style.display = 'block';
        document.getElementById('signup-message').innerHTML = 'Username or Email already exists';
    }

  </script>
</body>
</html>
